"use strict";(self.webpackChunkadguard_dns_knowledge_base=self.webpackChunkadguard_dns_knowledge_base||[]).push([[347],{4137:function(e,a,n){n.d(a,{Zo:function(){return d},kt:function(){return c}});var t=n(7294);function l(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function r(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){l(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,l=function(e,a){if(null==e)return{};var n,t,l={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(l[n]=e[n]);return l}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=t.createContext({}),s=function(e){var a=t.useContext(p),n=a;return e&&(n="function"==typeof e?e(a):r(r({},a),e)),n},d=function(e){var a=s(e.components);return t.createElement(p.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var n=e.components,l=e.mdxType,i=e.originalType,p=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=s(n),c=l,k=u["".concat(p,".").concat(c)]||u[c]||m[c]||i;return n?t.createElement(k,r(r({ref:a},d),{},{components:n})):t.createElement(k,r({ref:a},d))}));function c(e,a){var n=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=u;var o={};for(var p in a)hasOwnProperty.call(a,p)&&(o[p]=a[p]);o.originalType=e,o.mdxType="string"==typeof e?e:l,r[1]=o;for(var s=2;s<i;s++)r[s]=n[s];return t.createElement.apply(null,r)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5701:function(e,a,n){n.r(a),n.d(a,{assets:function(){return d},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return m}});var t=n(3117),l=n(102),i=(n(7294),n(4137)),r=["components"],o={title:"Sintaxis de las reglas de filtrado DNS",sidebar_position:2},p=void 0,s={unversionedId:"general/dns-filtering-syntax",id:"general/dns-filtering-syntax",title:"Sintaxis de las reglas de filtrado DNS",description:"Introducci\xf3n",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/general/dns-filtering-syntax.md",sourceDirName:"general",slug:"/general/dns-filtering-syntax",permalink:"/KnowledgeBaseDNS/es/general/dns-filtering-syntax",draft:!1,editUrl:"https://github.com/AdguardTeam/KnowledgeBaseDNS/edit/master/docs/general/dns-filtering-syntax.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Sintaxis de las reglas de filtrado DNS",sidebar_position:2},sidebar:"sidebar",previous:{title:"DNS filtering",permalink:"/KnowledgeBaseDNS/es/general/dns-filtering"},next:{title:"Known DNS Providers",permalink:"/KnowledgeBaseDNS/es/general/dns-providers"}},d={},m=[{value:"Introducci\xf3n",id:"introducci\xf3n",level:2},{value:"Ejemplos b\xe1sicos",id:"ejemplos-b\xe1sicos",level:2},{value:"Sintaxis de estilo Adblock",id:"sintaxis-de-estilo-adblock",level:2},{value:"Car\xe1cteres especiales",id:"car\xe1cteres-especiales",level:3},{value:"Expresiones regulares",id:"expresiones-regulares",level:3},{value:"Comentarios",id:"comentarios",level:3},{value:"Modificadores de reglas",id:"modificadores-de-reglas",level:3},{value:"<code>cliente</code>",id:"cliente",level:4},{value:"<code>denyallow</code>",id:"denyallow",level:4},{value:"<code>dnstype</code>",id:"dnstype",level:4},{value:"<code>dnsrewrite</code>",id:"dnsrewrite",level:4},{value:"<code>important</code>",id:"important",level:4},{value:"<code>badfilter</code>",id:"badfilter",level:4},{value:"<code>ctag</code>",id:"ctag",level:4},{value:"<code>/etc/hosts</code>-Style Syntax",id:"etc-hosts-syntax",level:2},{value:"Domains-Only Syntax",id:"domains-only-syntax",level:2},{value:"Hostlists Compiler",id:"hostlists-compiler",level:2}],u={toc:m};function c(e){var a=e.components,n=(0,l.Z)(e,r);return(0,i.kt)("wrapper",(0,t.Z)({},u,n,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"introducci\xf3n"},"Introducci\xf3n"),(0,i.kt)("p",null,"Puede usar la sintaxis para reglas de filtrado DNS de AdGuard para hacer las reglas m\xe1s flexibles, de modo que el bloqueo de contenido se haga conforme a sus preferencias. La sintaxis para reglas de filtrado DNS de AdGuard puede usarse en diferentes productos de AdGuard como AdGuard Home, AdGuard DNS o AdGuard para Windows/Mac/Android."),(0,i.kt)("p",null,"Hay tres enfoques diferentes para escribir listas de bloqueo de hosts:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#adblock-style-syntax"},"Sintaxis estilo Adblock"),": el enfoque m\xe1s moderno para escribir reglas de filtrado, basado en el uso de un subconjunto de reglas al estilo de las usadas por AdBlock. De esta manera, las listas de bloqueo creadas son compatibles con las de los bloqueadores de anuncios para navegador.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#etc-hosts-syntax"},(0,i.kt)("inlineCode",{parentName:"a"},"/etc/hosts")," Sintaxis"),": el enfoque antiguo y probado, que usa la misma sintaxis que los sistemas operativos usan para sus archivos de hosts.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#domains-only-syntax"},"Sintaxis de dominios"),": una simple lista de nombres de dominio."))),(0,i.kt)("p",null,"Si est\xe1s creando una lista de bloqueo, te recomendamos que utilices la sintaxis estilo ",(0,i.kt)("a",{parentName:"p",href:"#adblock-style-syntax"},"sintaxis-al-estilo-Adblock"),". Tiene algunas ventajas importantes sobre la sintaxis antigua:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Tama\xf1o de las listas de bloqueo.")," El uso de comparaci\xf3n de patrones le permite tener una sola regla en lugar de cientos de entradas ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Compatibilidad.")," Su lista de bloqueo ser\xe1 compatible con los bloqueadores de anuncios para navegador, y ser\xe1 m\xe1s f\xe1cil compartir reglas con una lista de filtros de navegador.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Extensibility.")," In the past decade, the Adblock-style syntax has greatly evolved, and we see no reason not to extend it even further and offer additional features for network-level blockers."))),(0,i.kt)("p",null,"If you're maintaining either a ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),"-style blocklist or multiple filtering lists (regardless of type), we provide a tool for blocklist compilation. We named it ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/HostlistCompiler"},"Hostlist compiler")," and we use it ourselves to create ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/AdGuardSDNSFilter"},"AdGuard DNS filter"),"."),(0,i.kt)("h2",{id:"ejemplos-b\xe1sicos"},"Ejemplos b\xe1sicos"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^"),": bloquea el acceso al dominio ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," y todos sus subdominios, como ",(0,i.kt)("inlineCode",{parentName:"p"},"www.example.org"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.org^"),": desbloquea el acceso al dominio ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," y todos sus subdominios.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4 example.org"),": (atenci\xf3n, sintaxis estilo ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/hosts")," antiguo) en AdGuard Home, el programa responde con ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4")," a las consultas para el dominio ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),", pero ",(0,i.kt)("strong",{parentName:"p"},"no")," a sus subdominios. En el DNS privado de AdGuard, bloquea el acceso a ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),". ",(0,i.kt)("inlineCode",{parentName:"p"},"www.example.org")," sigue estando permitido."),(0,i.kt)("p",{parentName:"li"},"En AdGuard Home, usar la direcci\xf3n IP no especificada (",(0,i.kt)("inlineCode",{parentName:"p"},"0.0.0.0"),") o una direcci\xf3n local (",(0,i.kt)("inlineCode",{parentName:"p"},"127.0.0.1")," y similares) para un host es b\xe1sicamente lo mismo que bloquear ese host."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},"# Devuelve la direcci\xf3n IP 1.2.3.4 para ejemplo.org.\n1.2.3.4 example.org\n# Blocks example.org by responding with 0.0.0.0.\n0.0.0.0 example.org\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),": una regla de dominio simple. Blocks the ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," domain but ",(0,i.kt)("strong",{parentName:"p"},"not")," its subdomains. ",(0,i.kt)("inlineCode",{parentName:"p"},"www.example.org")," sigue estando permitido.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"! Es un comentario ")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"# Tambi\xe9n un comentario"),": comentarios.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"/REGEX/"),": bloquea el acceso a los dominios que coincidan con la expresi\xf3n regular especificada."))),(0,i.kt)("h2",{id:"sintaxis-de-estilo-adblock"},"Sintaxis de estilo Adblock"),(0,i.kt)("p",null,"This is a subset of the ",(0,i.kt)("a",{parentName:"p",href:"https://adguard.com/kb/general/ad-filtering/create-own-filters/"},"traditional Adblock-style")," syntax which is used by browser ad blockers."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},'     rule = ["@@"] pattern [ "$" modifiers ]\nmodifiers = [modifier0, modifier1[, ...[, modifierN]]]\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"pattern")," (patr\xf3n): la m\xe1scara del nombre de host. Cada nombre de host se compara con esta m\xe1scara. El patr\xf3n tambi\xe9n puede contener caracteres especiales, que se describen a continuaci\xf3n.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@"),": el marcador que se utiliza en las reglas de excepci\xf3n. Inicie su regla con este marcador si desea desactivar el filtrado para los nombres de host que coincidan.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"modifiers")," (modificadores): par\xe1metros que aclaran la regla. Pueden limitar el alcance de la norma o incluso cambiar por completo su funcionamiento."))),(0,i.kt)("h3",{id:"car\xe1cteres-especiales"},"Car\xe1cteres especiales"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"*"),": el car\xe1cter comod\xedn. Se utiliza para representar cualquier conjunto de caracteres. Esto tambi\xe9n puede ser una cadena de texto vac\xeda o una cadena de texto de cualquier longitud.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||"),": coincide con el comienzo de un nombre de host, incluido cualquier subdominio. Por ejemplo, ",(0,i.kt)("inlineCode",{parentName:"p"},"||example.org")," coincide con ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"test.example.org")," pero no con ",(0,i.kt)("inlineCode",{parentName:"p"},"testexample.org"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"^"),": el car\xe1cter de separador. A diferencia del bloqueo de anuncios para navegador, no hay nada que separar en un nombre de host, por lo que el \xfanico prop\xf3sito de este car\xe1cter es marcar el final del nombre de host.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"|"),": un puntero al principio o al final del nombre de host. El valor depende de la ubicaci\xf3n del car\xe1cter. Por ejemplo, la regla ",(0,i.kt)("inlineCode",{parentName:"p"},"ample.org|")," corresponde a ",(0,i.kt)("inlineCode",{parentName:"p"},"ample.org")," pero no a ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org.com"),". ",(0,i.kt)("inlineCode",{parentName:"p"},"|example")," corresponde a ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," pero no a ",(0,i.kt)("inlineCode",{parentName:"p"},"test.example"),"."))),(0,i.kt)("h3",{id:"expresiones-regulares"},"Expresiones regulares"),(0,i.kt)("p",null,"Si desea a\xfan m\xe1s flexibilidad en la creaci\xf3n de reglas, puede usar ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions"},"expresiones regulares")," en lugar de la sintaxis simplificada predeterminada. Si desea utilizar una expresi\xf3n regular, el patr\xf3n debe verse as\xed:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},'pattern = "/" regexp "/"\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"/example.*/")," bloquear\xe1 los hosts que coincidan con la regexp ",(0,i.kt)("inlineCode",{parentName:"p"},"example.*"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@/example.*/$important")," desbloquear\xe1 los hosts que coincidan con la regexp ",(0,i.kt)("inlineCode",{parentName:"p"},"example.*"),". Tenga en cuenta que esta regla tambi\xe9n implica el modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"important")," (importante)."))),(0,i.kt)("h3",{id:"comentarios"},"Comentarios"),(0,i.kt)("p",null,"Cualquier l\xednea que comience con un signo de exclamaci\xf3n o de almohadilla es un comentario y ser\xe1 ignorado por el motor de filtrado. Los comentarios suelen colocarse encima de las reglas y se utilizan para describir lo que hace una regla."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"! Esto es un comentario.\n# Esto tambi\xe9n es un comentario.\n")),(0,i.kt)("h3",{id:"modificadores-de-reglas"},"Modificadores de reglas"),(0,i.kt)("p",null,"Puedes cambiar el comportamiento de una regla a\xf1adiendo modificadores. Los modificadores deben situarse al final de la regla despu\xe9s del car\xe1cter ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," y estar separados por comas."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none",metastring:"||example.org^$important","||example.org^$important":!0},"")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^")," es el patr\xf3n de coincidencia. ",(0,i.kt)("inlineCode",{parentName:"p"},"$"),' es el delimitador, que se\xf1ala que el resto de la regla son modificadores. El modificador es "importante".')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Es posible que desee utilizar varios modificadores en una regla. In that case, separate them by commas:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||example.org^$client=127.0.0.1,dnstype=A\n")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^")," es el patr\xf3n de coincidencia. ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," es el delimitador, que se\xf1ala que el resto de la regla son modificadores. ",(0,i.kt)("inlineCode",{parentName:"p"},"client=127.0.0.1")," es el modificador ",(0,i.kt)("a",{parentName:"p",href:"#client"},(0,i.kt)("inlineCode",{parentName:"a"},"client"))," con su valor, ",(0,i.kt)("inlineCode",{parentName:"p"},"127.0.0.1"),", es el delimitador. Y por \xfaltimo, ",(0,i.kt)("inlineCode",{parentName:"p"},"dnstype=A")," es el modificador ",(0,i.kt)("a",{parentName:"p",href:"#dnstype"},(0,i.kt)("inlineCode",{parentName:"a"},"dnstype"))," con su valor, ",(0,i.kt)("inlineCode",{parentName:"p"},"A"),"."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"NOTA:")," Si una regla contiene un modificador que no aparece en este documento, toda la regla ",(0,i.kt)("strong",{parentName:"p"},"debe ser ignorada"),". De este modo, evitamos los falsos positivos cuando alguien intenta utilizar listas de filtros para bloqueadores de anuncios sin modificarlas, como EasyList o EasyPrivacy."),(0,i.kt)("h4",{id:"cliente"},(0,i.kt)("inlineCode",{parentName:"h4"},"cliente")),(0,i.kt)("p",null,"El modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"client")," (cliente) permite especificar los clientes a los que se aplica esta regla. Hay dos formas principales de identificar a un cliente:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Por su direcci\xf3n IP o prefijo CIDR. Esta forma funciona para todo tipo de clientes.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Por su nombre. Este modo s\xf3lo funciona para los clientes persistentes (en AdGuard Home) y los dispositivos (en Private AdGuard DNS), que usted ha a\xf1adido manualmente."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"NOTA:"),' En AdGuard Home, actualmente no se admiten ClientIDs, s\xf3lo nombres. Si ha a\xf1adido un cliente con el nombre "Mi Cliente" y ClientID ',(0,i.kt)("inlineCode",{parentName:"p"},"mi-cliente")," escriba su modificador como ",(0,i.kt)("inlineCode",{parentName:"p"},"$client='Mi Cliente'")," en lugar de ",(0,i.kt)("inlineCode",{parentName:"p"},"$client=mi-cliente"),"."))),(0,i.kt)("p",null,"La sintaxis es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$client=valor1|valor2|...\n")),(0,i.kt)("p",null,"Tambi\xe9n puede excluir clientes a\xf1adiendo un car\xe1cter ",(0,i.kt)("inlineCode",{parentName:"p"},"~")," antes del valor. En este caso, la regla no se aplica a las peticiones DNS de este cliente."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$client=~valor1\n")),(0,i.kt)("p",null,"Los nombres de los clientes suelen contener espacios u otros caracteres especiales, por lo que debe colocar el nombre entre comillas. Both single and double ASCII quotes are supported. Use the backslash (",(0,i.kt)("inlineCode",{parentName:"p"},"\\"),") to escape quotes (",(0,i.kt)("inlineCode",{parentName:"p"},'"')," and ",(0,i.kt)("inlineCode",{parentName:"p"},"'"),"), commas (",(0,i.kt)("inlineCode",{parentName:"p"},","),"), and pipes (",(0,i.kt)("inlineCode",{parentName:"p"},"|"),")."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"NOTE:")," When excluding a client, you ",(0,i.kt)("strong",{parentName:"p"},"must")," place ",(0,i.kt)("inlineCode",{parentName:"p"},"~")," outside the quotes."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||*^$client=127.0.0.1"),": unblock everything for localhost.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$client='Frank\\'s laptop'"),": block ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," for the client named ",(0,i.kt)("inlineCode",{parentName:"p"},"Frank's laptop")," only. Note that quote (",(0,i.kt)("inlineCode",{parentName:"p"},"'"),") in the name must be escaped.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$client=~'Mary\\'s\\, John\\'s\\, and Boris\\'s laptops'"),": block ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," for everyone except for the client named ",(0,i.kt)("inlineCode",{parentName:"p"},"Mary's, John's, and Boris's laptops"),". Note that comma (",(0,i.kt)("inlineCode",{parentName:"p"},","),") must be escaped as well.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$client=~Mom|~Dad|Kids"),": block ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," for ",(0,i.kt)("inlineCode",{parentName:"p"},"Kids"),", but not for ",(0,i.kt)("inlineCode",{parentName:"p"},"Mom")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Dad"),". This example demonstrates how to specify multiple clients in one rule.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$client=192.168.0.0/24"),": block ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," for all clients with IP addresses in the range from ",(0,i.kt)("inlineCode",{parentName:"p"},"192.168.0.0")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"192.168.0.255"),"."))),(0,i.kt)("h4",{id:"denyallow"},(0,i.kt)("inlineCode",{parentName:"h4"},"denyallow")),(0,i.kt)("p",null,"You can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"denyallow")," modifier to exclude domains from the blocking rule. To add multiple domains to one rule, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"|")," character as a separator."),(0,i.kt)("p",null,"La sintaxis es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$denyallow=domain1|domain2|...\n")),(0,i.kt)("p",null,"This modifier allows avoiding creating unnecessary exception rules when our blocking rule covers too many domains. You may want to block everything except for a couple of TLD domains. You could use the standard approach, i.e. rules like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"! Block everything.\n/.*/\n\n! Unblock a couple of TLDs.\n@@||com^\n@@||net^\n")),(0,i.kt)("p",null,"The problem with this approach is that this way you will also unblock tracking domains that are located on those TLDs (i.e. ",(0,i.kt)("inlineCode",{parentName:"p"},"google-analytics.com"),"). Here's how to solve this with ",(0,i.kt)("inlineCode",{parentName:"p"},"denyallow"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"*$denyallow=com|net\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"*$denyallow=com|net"),": block everything except for ",(0,i.kt)("inlineCode",{parentName:"p"},"*.com")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"*.net"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@*$denyallow=com|net"),": unblock everything except for ",(0,i.kt)("inlineCode",{parentName:"p"},"*.com")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"*.net"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$denyallow=sub.example.org"),". block ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"*.example.org")," but don't block ",(0,i.kt)("inlineCode",{parentName:"p"},"sub.example.org"),"."))),(0,i.kt)("h4",{id:"dnstype"},(0,i.kt)("inlineCode",{parentName:"h4"},"dnstype")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"dnstype")," modifier allows specifying DNS request or response type on which this rule will be triggered."),(0,i.kt)("p",null,"La sintaxis es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnstype=value1|value2|...\n$dnstype=~value1|~value2|~...\n")),(0,i.kt)("p",null,"The names of the types are case-insensitive, but are validated against a set of actual DNS resource record (RR) types."),(0,i.kt)("p",null,"Do not combine exclusion rules with inclusion ones. This:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnstype=~value1|value2\n")),(0,i.kt)("p",null,"is equivalent to this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnstype=value2\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$dnstype=AAAA"),": block DNS queries for the IPv6 addresses of ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$dnstype=~A|~CNAME"),": only allow ",(0,i.kt)("inlineCode",{parentName:"p"},"A")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME")," DNS queries for ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),", block out the rest."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"NOTE:")," Before version ",(0,i.kt)("strong",{parentName:"p"},"v0.108.0,")," AdGuard Home would use the type of the request to filter the response records, as opposed to the type of the response record itself.  That caused issues, since that meant that you could not write rules that would allow certain ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME")," records in responses in ",(0,i.kt)("inlineCode",{parentName:"p"},"A")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"AAAA")," requests. In ",(0,i.kt)("strong",{parentName:"p"},"v0.108.0")," that behaviour was changed, so now this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||canon.example.com^$dnstype=~CNAME\n")),(0,i.kt)("p",null,"allows you to avoid filtering of the following response:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"ANSWERS:\n->  example.com\n    canonical name = canon.example.com.\n    ttl = 60\n->  canon.example.com\n    internet address = 1.2.3.4\n    ttl = 60\n")),(0,i.kt)("h4",{id:"dnsrewrite"},(0,i.kt)("inlineCode",{parentName:"h4"},"dnsrewrite")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"dnsrewrite")," response modifier allows replacing the content of the response to the DNS request for the matching hosts. Note that this modifier in AdGuard Home works in all rules, but in Private AdGuard DNS \u2014 only in custom ones."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Rules with the ",(0,i.kt)("inlineCode",{parentName:"strong"},"dnsrewrite")," response modifier have higher priority than other rules in AdGuard Home.")),(0,i.kt)("p",null,"The shorthand syntax is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnsrewrite=1.2.3.4\n$dnsrewrite=abcd::1234\n$dnsrewrite=example.net\n$dnsrewrite=REFUSED\n")),(0,i.kt)("p",null,"The keywords MUST be in all caps (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"NOERROR"),"). Keyword rewrites take precedence over the other and will result in an empty response with an appropriate response code."),(0,i.kt)("p",null,"The full syntax is of the form ",(0,i.kt)("inlineCode",{parentName:"p"},"RCODE;RRTYPE;VALUE"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnsrewrite=NOERROR;A;1.2.3.4\n$dnsrewrite=NOERROR;AAAA;abcd::1234\n$dnsrewrite=NOERROR;CNAME;example.net\n$dnsrewrite=REFUSED;;\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"$dnsrewrite")," modifier with the ",(0,i.kt)("inlineCode",{parentName:"p"},"NOERROR")," response code may also has empty ",(0,i.kt)("inlineCode",{parentName:"p"},"RRTYPE")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"VALUE")," fields."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME")," one is special because AdGuard Home will resolve the host and add its info to the response. That is, if ",(0,i.kt)("inlineCode",{parentName:"p"},"example.net")," has IP ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4"),", and the user has this in their filter rules:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||example.com^$dnsrewrite=example.net\n! Or:\n||example.com^$dnsrewrite=NOERROR;CNAME;example.net\n")),(0,i.kt)("p",null,"then the response will be something like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"$ nslookup example.com my.adguard.local\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"Server:     my.adguard.local\nAddress:    127.0.0.1#53\n\nNon-authoritative answer:\nexample.com canonical name = example.net.\nName:   example.net\nAddress: 1.2.3.4\n")),(0,i.kt)("p",null,"Next, the ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME")," rewrite. After that, all other records' values are summed as one response, so this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||example.com^$dnsrewrite=NOERROR;A;1.2.3.4\n||example.com^$dnsrewrite=NOERROR;A;1.2.3.5\n")),(0,i.kt)("p",null,"will result in a response with two ",(0,i.kt)("inlineCode",{parentName:"p"},"A")," records."),(0,i.kt)("p",null,"Currently supported RR types with examples:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||4.3.2.1.in-addr.arpa^$dnsrewrite=NOERROR;PTR;example.net.")," adds a ",(0,i.kt)("inlineCode",{parentName:"p"},"PTR"),"record for reverse DNS. Reverse DNS requests for ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4")," to the DNS server will result in ",(0,i.kt)("inlineCode",{parentName:"p"},"example.net"),"."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"NOTE:")," the IP MUST be in reverse order. See ",(0,i.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc1035#section-3.5"},"RFC 1035"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;A;1.2.3.4")," adds an ",(0,i.kt)("inlineCode",{parentName:"p"},"A")," record with the value ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;AAAA;abcd::1234")," adds an ",(0,i.kt)("inlineCode",{parentName:"p"},"AAAA")," record with the value ",(0,i.kt)("inlineCode",{parentName:"p"},"abcd::1234"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;CNAME;example.org")," adds a ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME")," record. See explanation above.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;HTTPS;32 example.com alpn=h3")," adds an ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTPS")," record. Only a subset of parameter values is supported: values must be ",(0,i.kt)("inlineCode",{parentName:"p"},"contiguous")," and, where a ",(0,i.kt)("inlineCode",{parentName:"p"},"value-list")," is ",(0,i.kt)("inlineCode",{parentName:"p"},"expected"),", only one value is currently supported:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},'ipv4hint=127.0.0.1             // Supported.\nipv4hint="127.0.0.1"           // Unsupported.\nipv4hint=127.0.0.1,127.0.0.2   // Unsupported.\nipv4hint="127.0.0.1,127.0.0.2" // Unsupported.\n')),(0,i.kt)("p",{parentName:"li"},"This will be changed in the future.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;MX;32 example.mail")," adds an ",(0,i.kt)("inlineCode",{parentName:"p"},"MX")," record with precedence value ",(0,i.kt)("inlineCode",{parentName:"p"},"32")," and exchange value ",(0,i.kt)("inlineCode",{parentName:"p"},"example.mail"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;SVCB;32 example.com alpn=h3")," adds a ",(0,i.kt)("inlineCode",{parentName:"p"},"SVCB")," value. See the ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTPS")," example above.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;TXT;hello_world")," adds a ",(0,i.kt)("inlineCode",{parentName:"p"},"TXT")," record with the value ",(0,i.kt)("inlineCode",{parentName:"p"},"hello_world"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||_svctype._tcp.example.com^$dnsrewrite=NOERROR;SRV;10 60 8080 example.com")," adds an ",(0,i.kt)("inlineCode",{parentName:"p"},"SRV")," record with priority value ",(0,i.kt)("inlineCode",{parentName:"p"},"10"),", weight value ",(0,i.kt)("inlineCode",{parentName:"p"},"60"),", port",(0,i.kt)("inlineCode",{parentName:"p"},"8080"),", and target value ",(0,i.kt)("inlineCode",{parentName:"p"},"example.com"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NXDOMAIN;;")," responds with an ",(0,i.kt)("inlineCode",{parentName:"p"},"NXDOMAIN")," code.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"$dnstype=AAAA,denyallow=example.org,dnsrewrite=NOERROR;;")," responds with an empty ",(0,i.kt)("inlineCode",{parentName:"p"},"NOERROR")," answers for all ",(0,i.kt)("inlineCode",{parentName:"p"},"AAAA")," requests except the ones for ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),"."))),(0,i.kt)("p",null,"Exception rules remove one or all rules:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.com^$dnsrewrite")," removes all DNS rewrite rules.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.com^$dnsrewrite=1.2.3.4")," removes the DNS rewrite rule that adds an ",(0,i.kt)("inlineCode",{parentName:"p"},"A")," record with the value ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4"),"."))),(0,i.kt)("h4",{id:"important"},(0,i.kt)("inlineCode",{parentName:"h4"},"important")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"important")," modifier applied to a rule increases its priority over any other rule without the modifier. Even over basic exception rules."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In this example:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||example.org^$important\n@@||example.org^\n")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$important")," will block all requests to ",(0,i.kt)("inlineCode",{parentName:"p"},"*.example.org")," despite the exception rule.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In this example:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||example.org^$important\n@@||example.org^$important\n")),(0,i.kt)("p",{parentName:"li"},"the exception rule also has the ",(0,i.kt)("inlineCode",{parentName:"p"},"important")," modifier, so it will work."))),(0,i.kt)("h4",{id:"badfilter"},(0,i.kt)("inlineCode",{parentName:"h4"},"badfilter")),(0,i.kt)("p",null,"The rules with the ",(0,i.kt)("inlineCode",{parentName:"p"},"badfilter")," modifier disable other basic rules to which they refer. It means that the text of the disabled rule should match the text of the ",(0,i.kt)("inlineCode",{parentName:"p"},"badfilter")," rule (without the ",(0,i.kt)("inlineCode",{parentName:"p"},"badfilter")," modifier)."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com$badfilter")," disables ",(0,i.kt)("inlineCode",{parentName:"p"},"||example.com"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.org^$badfilter")," disables ",(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.org^"),"."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"NOTE:")," The ",(0,i.kt)("inlineCode",{parentName:"p"},"badfilter")," modifier currently doesn't work with ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),"-style rules. ",(0,i.kt)("inlineCode",{parentName:"p"},"127.0.0.1 example.org$badfilter")," will ",(0,i.kt)("strong",{parentName:"p"},"not")," disable the original ",(0,i.kt)("inlineCode",{parentName:"p"},"127.0.0.1 example.org")," rule."))),(0,i.kt)("h4",{id:"ctag"},(0,i.kt)("inlineCode",{parentName:"h4"},"ctag")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"The ",(0,i.kt)("inlineCode",{parentName:"strong"},"ctag")," modifier can only be used in AdGuard Home.")),(0,i.kt)("p",null,"It allows to block domains only for specific types of DNS client tags. You can assign tags to clients in the AdGuard Home UI. In the future, we plan to assign tags automatically by analyzing the behavior of each client."),(0,i.kt)("p",null,"La sintaxis es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$ctag=value1|value2|...\n")),(0,i.kt)("p",null,"If one of client's tags matches the ",(0,i.kt)("inlineCode",{parentName:"p"},"ctag")," values, this rule applies to the client. The syntax for exclusion is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$ctag=~value1|~value2|...\n")),(0,i.kt)("p",null,"If one of client's tags matches the exclusion ",(0,i.kt)("inlineCode",{parentName:"p"},"ctag")," values, this rule doesn't apply to the client."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$ctag=device_pc|device_phone"),": block ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," for clients tagged as ",(0,i.kt)("inlineCode",{parentName:"p"},"device_pc")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"device_phone"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$ctag=~device_phone"),": block ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," for all clients except those tagged as ",(0,i.kt)("inlineCode",{parentName:"p"},"device_phone"),"."))),(0,i.kt)("p",null,"The list of allowed tags:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"By device type:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_audio"),": audio devices."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_camera"),": cameras."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_gameconsole"),": game consoles."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_laptop"),": laptops."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_nas"),": NAS (Network-attached Storages)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_pc"),": PCs."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_phone"),": phones."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_printer"),": printers."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_securityalarm"),": security alarms."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_tablet"),": tablets."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_tv"),": TVs."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_other"),": other devices."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"By operating system:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_android"),": Android."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_ios"),": iOS."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_linux"),": Linux."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_macos"),": macOS."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_windows"),": Windows."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_other"),": other OSes."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"By user group:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user_admin"),": administrators."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user_regular"),": regular users."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user_child"),": children.")))),(0,i.kt)("h2",{id:"etc-hosts-syntax"},(0,i.kt)("inlineCode",{parentName:"h2"},"/etc/hosts"),"-Style Syntax"),(0,i.kt)("p",null,"For each host a single line should be present with the following information:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"IP_address canonical_hostname [aliases...]\n")),(0,i.kt)("p",null,"Fields of the entries are separated by any number of space or tab characters. Text from the ",(0,i.kt)("inlineCode",{parentName:"p"},"#")," character until the end of the line is a comment and is ignored."),(0,i.kt)("p",null,"Hostnames may contain only alphanumeric characters, hyphen-minus signs (",(0,i.kt)("inlineCode",{parentName:"p"},"-"),"), and periods (",(0,i.kt)("inlineCode",{parentName:"p"},"."),"). They must begin with an alphabetic character and end with an alphanumeric character. Optional aliases provide for name changes, alternate spellings, shorter hostnames, or generic hostnames (for example, ",(0,i.kt)("inlineCode",{parentName:"p"},"localhost"),")."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"# This is a comment\n127.0.0.1 example.org example.info\n127.0.0.1 example.com\n127.0.0.1 example.net # this is also a comment\n")),(0,i.kt)("p",null,"In AdGuard Home, the IP addresses are used to respond to DNS queries for these domains. In Private AdGuard DNS, these addresses are simply blocked."),(0,i.kt)("h2",{id:"domains-only-syntax"},"Domains-Only Syntax"),(0,i.kt)("p",null,"A simple list of domain names, one name per line."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"# This is a comment\nexample.com\nexample.org\nexample.net # this is also a comment\n")),(0,i.kt)("p",null,"If a string is not a valid domain (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"*.example.org"),"), AdGuard Home will consider it to be an ",(0,i.kt)("a",{parentName:"p",href:"#adblock-style-syntax"},"Adblock-style")," rule."),(0,i.kt)("h2",{id:"hostlists-compiler"},"Hostlists Compiler"),(0,i.kt)("p",null,"If you are maintaining a blocklist and use different sources in it, ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/HostlistCompiler"},"Hostlists compiler")," may be useful to you. It is a simple tool that makes it easier to compile a hosts blocklist compatible with AdGuard Home, Private AdGuard DNS or any other AdGuard product with DNS filtering."),(0,i.kt)("p",null,"What it's capable of:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Compile a single blocklist from multiple sources.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Exclude the rules you don't need.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Cleanup the resulting list: deduplicate, remove invalid rules, and compress the list."))))}c.isMDXComponent=!0}}]);